<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Mechamarkers</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }

      body {
        font-family: sans-serif;
        font-size: 12px;
        line-height: 1.5;
        overflow: hidden;
        background: rgb(66, 66, 66);
      }

      .canvas {
        z-index: 2;
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
      }
    </style>
    <script src="./build/app.js"></script>
  </head>

  <body>
    <canvas class="canvas"></canvas>
      <!--Speedometer -->
      <img src= "https://images-na.ssl-images-amazon.com/images/I/81FAXirfJUL.png" id = "speedo" style="display:none"/>
    
      <!--radio -->
      <img src= "https://images-na.ssl-images-amazon.com/images/I/71zmEmUMZmL._AC_SX679_.jpg" id = "radio" style="display:none"/>
        
      <!--screen -->
      <img src= "https://www.driven.co.nz/media/99998043/legacy10.jpg" id = "screen" style="display:none"/>
        
    <script>
      // Make included libraries local
      const Mechamarkers = window.Mechamarkers;
      const Vec2 = window.Vec2;

      let prevTime, canvas, ctx;
      
      // This function is called every animation frame (roughly 60 times a second)
      function update() {
        // Keep track of time between updates as dt (delta time)
        const currTime = Date.now();
        const dt = (currTime - prevTime) / 1000;
        prevTime = currTime;

        // Update the mechamarkers library
        Mechamarkers.update(currTime);

        // If the group doesn't exist in the config or the config is not loaded
        // undefined will be returned, you can work around this with a simple if
        // if (Mechamarkers.getGroup('panel_1')) {
        //   // Let's see the position of that panel_1
        //   // console.log(Mechamarkers.getGroup('panel_1').pos)
        // }

        //Creates variable to be used in draw function
        marker11_pos = Mechamarkers.getMarker(11).center;
        marker12_pos = Mechamarkers.getMarker(12).center;
        marker10_pos = Mechamarkers.getMarker(10).center;

        draw();
        // Keep this at the end. It triggers the loop to continue
        window.requestAnimationFrame(update);
      }

      // Keep our draw code separate from our update
      function draw() {
        ctx.clearRect(-1, -1, canvas.width + 1, canvas.height + 1);
        ctx.fillStyle = 'black';
        //ctx.fillRect(marker11_pos.x, marker11_pos.y,40, 40) ;
  
        //Draws the image on canvas
        var speedo_img = document.getElementById("speedo");
        ctx.drawImage(speedo_img,marker11_pos.x, marker11_pos.y, 300, 300);
        var radio_img = document.getElementById("radio");
        ctx.drawImage(radio_img,marker12_pos.x, marker12_pos.y, 400, 200);
        var screen_img = document.getElementById("screen");
        ctx.drawImage(screen_img,marker10_pos.x, marker10_pos.y, 300, 300);
      }
      
      // Onload is called when the window loads
      window.onload = () => {
        prevTime = Date.now();
        // Get canvas references for drawing
        canvas = document.querySelector('canvas');
        ctx = canvas.getContext('2d');
        // This line initializes mechamarkers library
        Mechamarkers.init(canvas, ctx);

        // Full screne te canvas
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Begin the update loop
        update();
      }
    </script>
  </body>
</html>
