/*
Copyright (c) 2019 Daybrush
name: @scena/dragscroll
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/dragscroll.git
version: 0.2.1
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).DragScroll=e()}(this,function(){"use strict";var f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function s(t){return void 0===t}function T(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}return function(e){function t(){this.constructor=n}var n,r;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}f(n=i,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var o=i.prototype;return o.dragStart=function(t,e){var n=e.container.getBoundingClientRect(),r=n.top,i=n.left,o=n.width,f=n.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:i,width:o,height:f}},o.drag=function(t,e){var n=this,r=t.clientX,i=t.clientY,o=e.container,f=e.threshold,s=void 0===f?0:f,a=e.throttleTime,c=void 0===a?0:a,u=e.getScrollPosition,h=void 0===u?T:u,l=this.startRect,p=this.startPos,v=Date.now?Date.now():(new Date).getTime(),d=Math.max(c+this.prevTime-v,0),g=[0,0];if(l.top>i-s?(p[1]>l.top||i<p[1])&&(g[1]=-1):l.top+l.height<i+s&&(p[1]<l.top+l.height||i>p[1])&&(g[1]=1),l.left>r-s?(p[0]>l.left||r<p[0])&&(g[0]=-1):l.left+l.width<r+s&&(p[0]<l.left+l.width||r>p[0])&&(g[0]=1),clearTimeout(this.timer),!g[0]&&!g[1])return!1;if(0<d)return this.timer=window.setTimeout(function(){n.drag(t,e)},d),!1;this.prevTime=v;var y=h({container:o,direction:g});this.trigger("scroll",{container:o,direction:g,inputEvent:t});var m=h({container:o,direction:g}),_=m[0]-y[0],w=m[1]-y[1];return!(!_&&!w)&&(this.trigger("move",{offsetX:g[0]?_:0,offsetY:g[1]?w:0,inputEvent:t}),c&&(this.timer=window.setTimeout(function(){n.drag(t,e)},c)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},i}(function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var n=this._eventHandler[t]||[];if(!(0<n.length))return!0;n=n.concat(),e.eventType=t;var r=!1,i=[e],o=0;e.stop=function(){r=!0},e.currentTarget=this;for(var f=arguments.length,s=new Array(2<f?f-2:0),a=2;a<f;a++)s[a-2]=arguments[a];for(1<=s.length&&(i=i.concat(s)),o=0;n[o];o++)n[o].apply(this,i);return!r},e.once=function(i,o){if("object"==typeof i&&s(o)){var t,e=i;for(t in e)this.once(t,e[t]);return this}if("string"==typeof i&&"function"==typeof o){var f=this;this.on(i,function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];o.apply(f,n),f.off(i,t)})}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&s(e)){var n,r=t;for(n in r)this.on(n,r[n]);return this}if("string"==typeof t&&"function"==typeof e){var i=this._eventHandler[t];s(i)&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(e)}return this},e.off=function(t,e){if(s(t))return this._eventHandler={},this;if(s(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var n,r=t;for(n in r)this.off(n,r[n]);return this}var i,o,f=this._eventHandler[t];if(f)for(i=0;void 0!==(o=f[i]);i++)if(o===e){f=f.splice(i,1);break}return this},t}();return t.VERSION="2.1.2",t}())});
//# sourceMappingURL=dragscroll.pkgd.min.js.map
