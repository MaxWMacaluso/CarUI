{"ast":null,"code":"import jwt_decode from 'jwt-decode';\nimport store from '../store/store';\nimport { initiateGetProfile } from '../actions/profile';\nimport { signIn } from '../actions/auth';\nimport { history } from '../router/AppRouter';\nexport const validateFields = fieldsToValidate => {\n  return fieldsToValidate.every(field => Object.values(field)[0] !== '');\n};\nexport const maintainSession = () => {\n  const user_token = localStorage.getItem('user_token');\n\n  if (user_token) {\n    const decoded = jwt_decode(user_token);\n    updateStore(decoded);\n  } else {\n    history.push('/');\n  }\n};\nexport const updateStore = user => {\n  const {\n    profile_id,\n    profile_name\n  } = user;\n  store.dispatch(signIn({\n    profile_id,\n    profile_name,\n    token: localStorage.getItem('user_token')\n  }));\n  store.dispatch(initiateGetProfile(email));\n};","map":{"version":3,"sources":["/Users/maxmacaluso/Desktop/General/Academic/CU/CS/4830HMI/Team-Matrix/sprint_two/car_ui_app/front_end/src/utils/common.js"],"names":["jwt_decode","store","initiateGetProfile","signIn","history","validateFields","fieldsToValidate","every","field","Object","values","maintainSession","user_token","localStorage","getItem","decoded","updateStore","push","user","profile_id","profile_name","dispatch","token","email"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAASC,kBAAT,QAAmC,oBAAnC;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,SAASC,OAAT,QAAwB,qBAAxB;AAEA,OAAO,MAAMC,cAAc,GAAIC,gBAAD,IAAsB;AAClD,SAAOA,gBAAgB,CAACC,KAAjB,CAAwBC,KAAD,IAAWC,MAAM,CAACC,MAAP,CAAcF,KAAd,EAAqB,CAArB,MAA4B,EAA9D,CAAP;AACD,CAFM;AAIP,OAAO,MAAMG,eAAe,GAAG,MAAM;AACnC,QAAMC,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB;;AACA,MAAIF,UAAJ,EACA;AACE,UAAMG,OAAO,GAAGf,UAAU,CAACY,UAAD,CAA1B;AACAI,IAAAA,WAAW,CAACD,OAAD,CAAX;AACD,GAJD,MAMA;AACEX,IAAAA,OAAO,CAACa,IAAR,CAAa,GAAb;AACD;AACF,CAXM;AAaP,OAAO,MAAMD,WAAW,GAAIE,IAAD,IAAU;AACnC,QAAM;AAACC,IAAAA,UAAD;AAAaC,IAAAA;AAAb,MAA6BF,IAAnC;AACAjB,EAAAA,KAAK,CAACoB,QAAN,CACElB,MAAM,CAAC;AACHgB,IAAAA,UADG;AAEHC,IAAAA,YAFG;AAGLE,IAAAA,KAAK,EAAET,YAAY,CAACC,OAAb,CAAqB,YAArB;AAHF,GAAD,CADR;AAOAb,EAAAA,KAAK,CAACoB,QAAN,CAAenB,kBAAkB,CAACqB,KAAD,CAAjC;AACD,CAVM","sourcesContent":["import jwt_decode from 'jwt-decode';\nimport store from '../store/store';\nimport { initiateGetProfile } from '../actions/profile';\nimport { signIn } from '../actions/auth';\nimport { history } from '../router/AppRouter';\n\nexport const validateFields = (fieldsToValidate) => {\n  return fieldsToValidate.every((field) => Object.values(field)[0] !== '');\n};\n\nexport const maintainSession = () => {\n  const user_token = localStorage.getItem('user_token');\n  if (user_token) \n  {\n    const decoded = jwt_decode(user_token);\n    updateStore(decoded);\n  } \n  else \n  {\n    history.push('/');\n  }\n};\n\nexport const updateStore = (user) => {\n  const {profile_id, profile_name} = user;\n  store.dispatch(\n    signIn({\n        profile_id,\n        profile_name,\n      token: localStorage.getItem('user_token')\n    })\n  );\n  store.dispatch(initiateGetProfile(email));\n};"]},"metadata":{},"sourceType":"module"}