{"ast":null,"code":"import axios from 'axios';\nimport { SIGN_IN, SIGN_OUT, BASE_API_URL } from '../utils/constants';\nimport { initiateGetProfile } from './profile';\nimport { history } from '../router/appRouter';\nimport { getErrors } from './errors';\nimport { setAuthHeader, removeAuthHeader } from '../utils/common';\nimport { post } from '../utils/api';\nexport const signIn = user => ({\n  type: SIGN_IN,\n  user\n});\nexport const signOut = () => ({\n  type: SIGN_OUT\n}); //POSSIBLE ERROR\n\nexport const initiateLogin = (profile_name, password) => {\n  return async dispatch => {\n    try {\n      const result = await axios.post(`${BASE_API_URL}/signin`, {\n        profile_name,\n        password\n      });\n      const user = result.data;\n      localStorage.setItem('user_token', user.token);\n      dispatch(signIn(user));\n      dispatch(initiateGetProfile(user.profile_name));\n      history.push('/profile');\n    } catch (error) {\n      console.log('Error ', error);\n      error.response && dispatch(getErrors(error.response.data));\n    }\n  };\n};\nexport const initiateLogout = () => {\n  return async dispatch => {\n    try {\n      setAuthHeader();\n      await post(`${BASE_API_URL}/logout`, true, true);\n      removeAuthHeader();\n      localStorage.removeItem('user_token');\n      return dispatch(signOut());\n    } catch (error) {\n      error.response && dispatch(getErrors(error.response.data));\n    }\n  };\n}; //Calling server API http://localhost:3001/singup by passing user data as second param to it\n//Sends back object '{success: true}  as a result of API call\n\nexport const registerNewUser = data => {\n  return async dispatch => {\n    try {\n      await axios.post(`${BASE_API_URL}/signup`, data);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.log('Error ', error);\n      error.response && dispatch(getErrors(error.response.data));\n      return {\n        success: false\n      };\n    }\n  };\n};","map":{"version":3,"sources":["/Users/maxmacaluso/Desktop/General/Academic/CU/CS/4830HMI/Team-Matrix/sprint_two/car_ui_app/front_end/src/actions/auth.js"],"names":["axios","SIGN_IN","SIGN_OUT","BASE_API_URL","initiateGetProfile","history","getErrors","setAuthHeader","removeAuthHeader","post","signIn","user","type","signOut","initiateLogin","profile_name","password","dispatch","result","data","localStorage","setItem","token","push","error","console","log","response","initiateLogout","removeItem","registerNewUser","success"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,QAAlB,EAA4BC,YAA5B,QAAgD,oBAAhD;AACA,SAASC,kBAAT,QAAmC,WAAnC;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,SAASC,SAAT,QAA0B,UAA1B;AACA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,iBAAhD;AACA,SAASC,IAAT,QAAqB,cAArB;AAEA,OAAO,MAAMC,MAAM,GAAIC,IAAD,KAAW;AAACC,EAAAA,IAAI,EAAEX,OAAP;AAAgBU,EAAAA;AAAhB,CAAX,CAAf;AAEP,OAAO,MAAME,OAAO,GAAG,OAAO;AAACD,EAAAA,IAAI,EAAEV;AAAP,CAAP,CAAhB,C,CAEP;;AACA,OAAO,MAAMY,aAAa,GAAG,CAACC,YAAD,EAAeC,QAAf,KAA4B;AACvD,SAAO,MAAOC,QAAP,IAAoB;AACzB,QACA;AACE,YAAMC,MAAM,GAAG,MAAMlB,KAAK,CAACS,IAAN,CAAY,GAAEN,YAAa,SAA3B,EAAqC;AAACY,QAAAA,YAAD;AAAeC,QAAAA;AAAf,OAArC,CAArB;AACA,YAAML,IAAI,GAAGO,MAAM,CAACC,IAApB;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCV,IAAI,CAACW,KAAxC;AACAL,MAAAA,QAAQ,CAACP,MAAM,CAACC,IAAD,CAAP,CAAR;AACAM,MAAAA,QAAQ,CAACb,kBAAkB,CAACO,IAAI,CAACI,YAAN,CAAnB,CAAR;AACAV,MAAAA,OAAO,CAACkB,IAAR,CAAa,UAAb;AACD,KARD,CASA,OAAOC,KAAP,EACA;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,KAAtB;AACAA,MAAAA,KAAK,CAACG,QAAN,IAAkBV,QAAQ,CAACX,SAAS,CAACkB,KAAK,CAACG,QAAN,CAAeR,IAAhB,CAAV,CAA1B;AACD;AACF,GAfD;AAgBD,CAjBM;AAmBP,OAAO,MAAMS,cAAc,GAAG,MAAM;AAClC,SAAO,MAAOX,QAAP,IAAoB;AACzB,QACA;AACEV,MAAAA,aAAa;AACb,YAAME,IAAI,CAAE,GAAEN,YAAa,SAAjB,EAA2B,IAA3B,EAAiC,IAAjC,CAAV;AACAK,MAAAA,gBAAgB;AAChBY,MAAAA,YAAY,CAACS,UAAb,CAAwB,YAAxB;AACA,aAAOZ,QAAQ,CAACJ,OAAO,EAAR,CAAf;AACD,KAPD,CAQA,OAAOW,KAAP,EACA;AACEA,MAAAA,KAAK,CAACG,QAAN,IAAkBV,QAAQ,CAACX,SAAS,CAACkB,KAAK,CAACG,QAAN,CAAeR,IAAhB,CAAV,CAA1B;AACD;AACF,GAbD;AAcD,CAfM,C,CAiBP;AACA;;AACA,OAAO,MAAMW,eAAe,GAAIX,IAAD,IAAU;AACvC,SAAO,MAAOF,QAAP,IAAoB;AACzB,QACA;AACE,YAAMjB,KAAK,CAACS,IAAN,CAAY,GAAEN,YAAa,SAA3B,EAAqCgB,IAArC,CAAN;AACA,aAAO;AAAEY,QAAAA,OAAO,EAAE;AAAX,OAAP;AACD,KAJD,CAKA,OAAOP,KAAP,EACA;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,KAAtB;AACAA,MAAAA,KAAK,CAACG,QAAN,IAAkBV,QAAQ,CAACX,SAAS,CAACkB,KAAK,CAACG,QAAN,CAAeR,IAAhB,CAAV,CAA1B;AACA,aAAO;AAAEY,QAAAA,OAAO,EAAE;AAAX,OAAP;AACD;AACF,GAZD;AAaD,CAdM","sourcesContent":["import axios from 'axios';\nimport { SIGN_IN, SIGN_OUT, BASE_API_URL } from '../utils/constants';\nimport { initiateGetProfile } from './profile';\nimport { history } from '../router/appRouter';\nimport { getErrors } from './errors';\nimport { setAuthHeader, removeAuthHeader } from '../utils/common';\nimport { post } from '../utils/api';\n\nexport const signIn = (user) => ({type: SIGN_IN, user});\n\nexport const signOut = () => ({type: SIGN_OUT});\n\n//POSSIBLE ERROR\nexport const initiateLogin = (profile_name, password) => {\n  return async (dispatch) => {\n    try \n    {\n      const result = await axios.post(`${BASE_API_URL}/signin`, {profile_name, password});\n      const user = result.data;\n      localStorage.setItem('user_token', user.token);\n      dispatch(signIn(user));\n      dispatch(initiateGetProfile(user.profile_name));\n      history.push('/profile');\n    } \n    catch (error) \n    {\n      console.log('Error ', error);\n      error.response && dispatch(getErrors(error.response.data));\n    }\n  };\n};\n\nexport const initiateLogout = () => {\n  return async (dispatch) => {\n    try \n    {\n      setAuthHeader();\n      await post(`${BASE_API_URL}/logout`, true, true);\n      removeAuthHeader();\n      localStorage.removeItem('user_token');\n      return dispatch(signOut());\n    } \n    catch (error) \n    {\n      error.response && dispatch(getErrors(error.response.data));\n    }\n  };\n};\n\n//Calling server API http://localhost:3001/singup by passing user data as second param to it\n//Sends back object '{success: true}  as a result of API call\nexport const registerNewUser = (data) => {\n  return async (dispatch) => {\n    try \n    {\n      await axios.post(`${BASE_API_URL}/signup`, data);\n      return { success: true };\n    } \n    catch (error) \n    {\n      console.log('Error ', error);\n      error.response && dispatch(getErrors(error.response.data));\n      return { success: false };\n    }\n  };\n};"]},"metadata":{},"sourceType":"module"}