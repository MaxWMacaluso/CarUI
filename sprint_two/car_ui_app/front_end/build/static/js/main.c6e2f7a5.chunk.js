(this.webpackJsonpcar_ui_app=this.webpackJsonpcar_ui_app||[]).push([[0],{112:function(e,t,r){},113:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),o=r.n(a),s=r(21),c=r.n(s),i=r(13),l=r(14),u=r.n(l),p=r(15),d=r(9),f=r(30),m=r(22),g=r(23),h=r(25),j=r(24),b=r(117),O=r(115),v=r(7),x=r.n(v),_=r(11),y=r(18),S=r.n(y),k="http://localhost:3001",w="SIGN_IN",I="SIGN_OUT",C="GET_ERRORS",N="RESET_ERRORS",U="UPDATE_PROFILE",D=function(e){return{type:C,errors:e}},E=function(){return{type:N}},T=(r(67),r(35)),L=r(68),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.user;case I:return{};default:return e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return t.errors;case N:return{};default:return e}},z=r(69),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(z.a)({},t.profile);default:return e}},q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,J=Object(T.e)(Object(T.c)({auth:P,errors:R,profile:F}),q(Object(T.a)(L.a))),G=function(e){return e.every((function(e){return""!==Object.values(e)[0]}))},M=function(){var e=localStorage.getItem("user_token");e&&(S.a.defaults.headers.common.Authorization="Bearer ".concat(e))},A=function(){delete S.a.defaults.headers.common.Authorization},$=function(){var e=Object(_.a)(x.a.mark((function e(t,r){var n,a,o,s=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(s.length>2&&void 0!==s[2])||s[2],a=s.length>3&&void 0!==s[3]&&s[3],n&&M(),e.next=5,S.a.get(t,r);case 5:return o=e.sent,a&&A(),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(_.a)(x.a.mark((function e(t,r){var n,a,o,s=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(s.length>2&&void 0!==s[2])||s[2],a=s.length>3&&void 0!==s[3]&&s[3],n&&M(),e.next=5,S.a.post(t,r);case 5:return o=e.sent,a&&A(),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),X=function(e){return{type:U,profile:e}},W=function(e){return function(){var t=Object(_.a)(x.a.mark((function t(r){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B("".concat(k,"/profile"),e);case 3:n=t.sent,r(X(n.data)),Ce.push("/profile"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response&&r(D(t.t0.response.data));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Y=function(){return function(){var e=Object(_.a)(x.a.mark((function e(t){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(),e.next=4,$("".concat(k,"/profile"));case 4:r=e.sent,t(X(r.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&t(D(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},H=function(){return new Promise((function(e,t){$("".concat(k,"/profile")).then((function(t){e(t.data)})).catch((function(e){t(e)}))}))},K=function(e){return{type:w,user:e}},Q=function(e,t){return function(){var r=Object(_.a)(x.a.mark((function r(n){var a,o;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.a.post("".concat(k,"/signin"),{profile_name:e,password:t});case 3:a=r.sent,o=a.data,localStorage.setItem("user_token",o.token),n(K(o)),n(Y(o.profile_name)),Ce.push("/car_ui"),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),console.log("Error ",r.t0),r.t0.response&&n(D(r.t0.response.data));case 15:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()},V=function(){return function(){var e=Object(_.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(),e.next=4,B("".concat(k,"/logout"),!0,!0);case 4:return A(),localStorage.removeItem("user_token"),Ce.push("/"),e.abrupt("return",t({type:I}));case 10:e.prev=10,e.t0=e.catch(0),e.t0.response&&t(D(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(_.a)(x.a.mark((function t(r){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.post("".concat(k,"/signup"),e);case 3:return t.abrupt("return",{success:!0});case 6:return t.prev=6,t.t0=t.catch(0),console.log("Error ",t.t0),t.t0.response&&r(D(t.t0.response.data)),t.abrupt("return",{success:!1});case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},ee=r(34),te=function(e){Object(h.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(m.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={profile_name:"",password:"",error_msg:""},e.handleLogin=function(t){t.preventDefault();var r=e.state,n=r.profile_name,a=r.password;G([{profile_name:n},{password:a}])?(e.setState({error_msg:{signin_error:""}}),e.props.dispatch(Q(n,a))):e.setState({error_msg:{signin_error:"Please enter all the fields"}})},e.handleInputChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(f.a)({},n,a))},e}return Object(g.a)(r,[{key:"componentDidUpdate",value:function(e){u.a.isEqual(e.errors,this.props.errors)||this.setState({error_msg:this.props.errors})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(E())}},{key:"render",value:function(){var e=this.state.error_msg;return Object(n.jsxs)("div",{className:"login-page",children:[Object(n.jsx)("h1",{children:"Login or Create an Account!"}),Object(n.jsx)("div",{className:"login-form",children:Object(n.jsxs)(b.a,{onSubmit:this.handleLogin,children:[e&&e.signin_error&&Object(n.jsx)("p",{className:"error_msg centered-message",children:e.signin_error}),Object(n.jsxs)(b.a.Group,{controlId:"profile_name",children:[Object(n.jsx)(b.a.Label,{children:"Profile Name"}),Object(n.jsx)(b.a.Control,{type:"text",name:"profile_name",placeholder:"Enter Profile Name",onChange:this.handleInputChange})]}),Object(n.jsxs)(b.a.Group,{controlId:"password",children:[Object(n.jsx)(b.a.Label,{children:"Password"}),Object(n.jsx)(b.a.Control,{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleInputChange})]}),Object(n.jsxs)("div",{className:"action-items",children:[Object(n.jsx)(O.a,{variant:"primary",type:"submit",children:"Login"}),Object(n.jsx)(ee.a,{to:"/register_user",className:"btn btn-secondary",children:"Create account"})]})]})})]})}}]),r}(o.a.Component),re=Object(i.b)((function(e){return{errors:e.errors}}))(te),ne=function(){return Object(n.jsx)(re,{})},ae=function(e){Object(h.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(m.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={profile_name:"",password:"",confirm_password:"",success_msg:"",error_msg:"",is_submitted:!1},e.registerUser=function(t){t.preventDefault();var r=e.state,n=r.profile_name,a=r.password,o=r.confirm_password;G([{profile_name:n},{password:a},{confirm_password:o}])?a!==o?e.setState({error_msg:{signup_error:"Password and confirm password does not match"}}):(e.setState({is_submitted:!0}),e.props.dispatch(Z({profile_name:n,password:a})).then((function(t){t.success&&(e.setState({success_msg:"User registered successfully.",error_msg:""}),e.props.dispatch(Q(n,a)))}))):e.setState({error_msg:{signup_error:"Please enter all the fields"}})},e.handleInputChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(f.a)({},n,a))},e}return Object(g.a)(r,[{key:"componentDidUpdate",value:function(e){u.a.isEqual(e.errors,this.props.errors)||this.setState({error_msg:this.props.errors})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(E())}},{key:"render",value:function(){var e=this.state,t=e.error_msg,r=e.success_msg,a=e.is_submitted;return Object(n.jsxs)("div",{className:"login-page",children:[Object(n.jsx)("h2",{children:"Register User"}),Object(n.jsx)("div",{className:"login-form",children:Object(n.jsxs)(b.a,{onSubmit:this.registerUser,children:[t&&t.signup_error?Object(n.jsx)("p",{className:"error_msg centered-message",children:t.signup_error}):a&&Object(n.jsx)("p",{className:"success_msg centered-message",children:r}),Object(n.jsxs)(b.a.Group,{controlId:"profile_name",children:[Object(n.jsx)(b.a.Label,{children:"Profile name"}),Object(n.jsx)(b.a.Control,{type:"text",name:"profile_name",placeholder:"Profile name",onChange:this.handleInputChange})]}),Object(n.jsxs)(b.a.Group,{controlId:"password",children:[Object(n.jsx)(b.a.Label,{children:"Password"}),Object(n.jsx)(b.a.Control,{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleInputChange})]}),Object(n.jsxs)(b.a.Group,{controlId:"confirm_password",children:[Object(n.jsx)(b.a.Label,{children:"Confirm password"}),Object(n.jsx)(b.a.Control,{type:"password",name:"confirm_password",placeholder:"Enter confirm password",onChange:this.handleInputChange})]}),Object(n.jsxs)("div",{className:"action-items",children:[Object(n.jsx)(O.a,{variant:"primary",type:"submit",children:"Register"}),Object(n.jsx)(ee.a,{to:"/",className:"btn btn-secondary",children:"Login"})]})]})})]})}}]),r}(o.a.Component),oe=Object(i.b)((function(e){return{errors:e.errors}}))(ae),se=function(){return Object(n.jsx)(oe,{})},ce=r(70),ie=r(8),le=r(116),ue=r(36),pe=r(72),de=function(e){Object(h.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(m.a)(this,r),(n=t.call(this,e)).resetState=n.resetState.bind(Object(ue.a)(n)),n.resetStates=n.resetStates.bind(Object(ue.a)(n)),n.frameFromStyle=n.frameFromStyle.bind(Object(ue.a)(n)),n.extract=n.extract.bind(Object(ue.a)(n)),n.state={target:null,frame:{translate:[0,0],rotate:0,scale:[1,1],transformOrigin:"50% 50%"}},n}return Object(g.a)(r,[{key:"resetState",value:function(){this.setState({target:document.querySelector("."+this.props.moveableTarget),frame:{translate:[0,0],scale:[1,1],rotate:0,transformOrigin:"50% 50%"}})}},{key:"resetStates",value:function(e){this.setState({target:document.querySelector("."+e),frame:this.frameFromStyle(e)})}},{key:"extract",value:function(e,t){for(var r={},n=t.match(/\${.*?}/g),a=t.split(/\${.*?}/g),o=0;o<n.length;o++)n[o]=n[o].replace("${","").replace("}","");for(o=0;o<a.length;o++){var s=e.indexOf(a[o])+a[o].length;e=e.substring(s);var c=0;try{c=e.indexOf(a[o+1])}catch(i){c=e.length}r[n[o]]=e.substring(0,c)}return r}},{key:"frameFromStyle",value:function(e){var t=null;try{var r=document.querySelector("."+e).style.transformOrigin,n=document.querySelector("."+e).style.transform;if(NaN==n||""==n)throw"Style.transform does not exist!";var a=this.extract(n,"translate(${translateX}px, ${translateY}px) rotate(${rotate}deg) scale(${scaleX}, ${scaleY})");t={translate:[parseInt(a.translateX),parseInt(a.translateY)],scale:[parseFloat(a.scaleX),parseFloat(a.scaleY)],rotate:parseFloat(a.rotate),transformOrigin:r}}catch(o){t={translate:[0,0],scale:[1,1],rotate:0,transformOrigin:"50% 50%"}}return t}},{key:"componentDidMount",value:function(){this.resetState()}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(pe.a,{target:this.state.target,scalable:!0,keepRatio:!1,throttleScale:0,renderDirections:["nw","n","ne","w","e","sw","s","se"],originDraggable:!0,originRelative:!0,draggable:!0,throttleDrag:0,startDragRotate:0,throttleDragRotate:0,zoom:1,origin:!0,padding:{left:0,top:0,right:0,bottom:0},rotatable:!0,throttleRotate:0,rotationPosition:"top",onScaleStart:function(t){var r=t.set,n=t.dragStart;r(e.state.frame.scale),n&&n.set(e.state.frame.translate)},onScale:function(t){t.target;var r=t.scale,n=t.drag.beforeTranslate;e.state.frame.translate=n,e.state.frame.scale=r,e.state.target.style.transform="translate(".concat(n[0],"px, ").concat(n[1],"px)")+" scale(".concat(r[0],", ").concat(r[1],")")},onScaleEnd:function(t){var r=t.lastEvent;r&&(e.state.frame.translate=r.drag.beforeTranslate,e.state.frame.scale=r.scale)},onDragOriginStart:function(t){var r=t.dragStart;r&&r.set(e.state.frame.translate)},onDragOrigin:function(t){t.target;var r=t.drag,n=t.transformOrigin;e.state.frame.translate=r.beforeTranslate,e.state.frame.transformOrigin=n},onDragStart:function(t){(0,t.set)(e.state.frame.translate)},onDrag:function(t){t.target;var r=t.beforeTranslate;e.state.frame.translate=r},onRotateStart:function(t){(0,t.set)(e.state.frame.rotate)},onRotate:function(t){var r=t.beforeRotate;e.state.frame.rotate=r},onRender:function(t){t.target;var r=e.state.frame,n=r.translate,a=r.rotate,o=r.scale,s=r.transformOrigin;e.state.target.style.transformOrigin=s,e.state.target.style.transform="translate(".concat(n[0],"px, ").concat(n[1],"px)")+" rotate(".concat(a,"deg)")+" scale(".concat(o[0],", ").concat(o[1],")")}})})}}]),r}(a.Component),fe=function(e){var t=Object(a.useState)(""),r=Object(ie.a)(t,2),o=r[0],s=r[1],c=Object(a.useState)("Choose File"),i=Object(ie.a)(c,2),l=i[0],u=i[1],p=Object(a.useState)({}),d=Object(ie.a)(p,2),f=(d[0],d[1]),m=function(){var t=Object(_.a)(x.a.mark((function t(r){var n,a,s,c,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),(n=new FormData).append("file",o),n.append("userToken",localStorage.getItem("user_token")),t.prev=4,t.next=7,S.a.post("/upload",n,{headers:{"Content-Type":"multipart/form-data"}});case 7:a=t.sent,s=a.data,c=s.fileName,i=s.filePath,f({fileName:c,filePath:i}),e.onSuccessfulUpload(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0),500===t.t0.response.status?console.log("There was a problem with the server"):console.log(t.t0.response.data.msg);case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:m,children:[Object(n.jsx)("input",{type:"file",className:"fileUploadInput",id:"customFile",onChange:function(e){s(e.target.files[0]),u(e.target.files[0].name)}}),Object(n.jsx)("label",{className:"fileUploadInput",htmlFor:"customFile",children:l}),Object(n.jsx)("input",{type:"submit",value:"Upload"})]})})},me=function(e){var t=Object(a.useState)(!1),r=Object(ie.a)(t,2),o=r[0],s=r[1],c=Object(a.useState)(null),i=Object(ie.a)(c,2),l=i[0],u=i[1],p=Object(a.useState)(null),d=Object(ie.a)(p,2),f=d[0],m=d[1],g=localStorage.getItem("user_token");function h(){H().then((function(t){var r=t.profile_id;fetch("".concat(k,"/userUploadedImages?access_token=").concat(g)).then((function(e){return e.text()})).then((function(t){try{m(JSON.parse(t).map((function(t){return Object(n.jsx)("div",{children:Object(n.jsx)("li",{children:Object(n.jsx)("img",{onClick:function(){return e.imageChosen("".concat(k,"/uploads/user_profiles/profile_")+r+"/"+t)},src:"".concat(k,"/uploads/user_profiles/profile_")+r+"/"+t,alt:"Set user images"})})})})))}catch(a){console.log(a)}}))})),fetch("".concat(k,"/defaultImages")).then((function(e){return e.text()})).then((function(t){try{u(JSON.parse(t).map((function(t){return Object(n.jsx)("div",{children:Object(n.jsx)("li",{children:Object(n.jsx)("img",{onClick:function(){return e.imageChosen("".concat(k,"/uploads/default_images/")+t)},src:"".concat(k,"/uploads/default_images/")+t,alt:"Set default images"})})})})))}catch(r){console.log(r)}}))}return Object(a.useEffect)((function(){0==o&&h(),s(1)})),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Default Images"}),Object(n.jsx)("ul",{className:"images",children:l||"No images here!"}),Object(n.jsx)("h3",{children:"User Images"}),Object(n.jsx)("ul",{className:"images",children:f||"No images here!"}),Object(n.jsx)(fe,{onSuccessfulUpload:function(){h()}}),Object(n.jsx)("div",{style:{color:e.skinColour}})]})},ge=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{className:"center",src:"/loading.gif",alt:"Loading Gif"}),Object(n.jsx)("div",{id:"overlay",children:"Testing"})]})},he=function(){var e=Object(a.useState)(o.a.createRef()),t=Object(ie.a)(e,2),r=t[0],s=(t[1],Object(a.useState)(null)),c=Object(ie.a)(s,2),i=c[0],l=c[1],u=Object(a.useState)(null),p=Object(ie.a)(u,2),f=p[0],m=p[1],g=Object(a.useState)(!1),h=Object(ie.a)(g,2),j=h[0],b=h[1],v=function(){return b(!1)},x=Object(a.useState)(!1),_=Object(ie.a)(x,2),y=_[0],S=_[1],w=Object(a.useState)(!1),I=Object(ie.a)(w,2),C=I[0],N=I[1],U=Object(a.useState)(null),D=Object(ie.a)(U,2),E=D[0],T=D[1],L=Object(a.useState)(null),P=Object(ie.a)(L,2),R=P[0],z=P[1],F=Object(d.f)(),q=Object(a.useState)([]),J=Object(ie.a)(q,2),G=J[0];J[1];var M=null;try{M=function(){var e=F.search;e=(e=e.split("?")[1]).split(/=|\&/g);for(var t={},r=0;r<e.length;r+=2)t[e[r]]=e[r+1];return t}()}catch(ee){}console.log("Query Params: ",M),console.log("------------------------------");var A=Object(a.useState)(!1),$=Object(ie.a)(A,2),B=$[0],X=$[1],W=localStorage.getItem("user_token");function Y(e){S(e.map((function(e){return Object(n.jsxs)("div",{children:[console.log(Object(n.jsx)("li",{children:e.img_source},e.img_source)),Object(n.jsx)("img",{id:"placedImage",className:"moveable"+e.img_id,src:e.img_source,alt:"Set Image",style:{transform:e.img_transform,transformOrigin:e.img_transform_origin,zIndex:e.img_z_index}})]})})))}function H(){console.log("getImg() || Location:",F),console.log("------------------------------"),fetch("".concat(k,"/images-by-profile?access_token=").concat(W)).then((function(e){return e.text()})).then((function(e){console.log("getImg() || Data Retrieved: ",e),console.log("------------------------------"),S("ee");var t,r=Object(ce.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,o="moveable".concat(a.img_id);Object(n.jsx)("img",{id:"placedImage",className:o,src:a.img_source,alt:"User's Image",style:""})}}catch(s){r.e(s)}finally{r.f()}e=JSON.parse(e),console.log("getImg() || Data: ",e),console.log("------------------------------"),N(!0),Y(e),function(e){z(e),G.push(JSON.stringify(e))}(e),console.log("getImg() || Logging undo stack: "),console.log(G),console.log("------------------------------")}))}function K(){var e=JSON.parse(JSON.stringify(R));if(null==e)return console.log("getPageData() || localCopy IS NULL"),null;for(var t=0;t<e.length;t++)e[t].img_transform=document.querySelector(".moveable"+e[t].img_id).style.transform,e[t].img_transform_origin=document.querySelector(".moveable"+e[t].img_id).style.transformOrigin,e[t].img_z_index=document.querySelector(".moveable"+e[t].img_id).style.zIndex;return e}function Q(e){console.log("changeTarget() || IMAGE CHOSEN"),null!=e&&""!=e&&e.startsWith("moveable")||(e="none"),null==r.current?console.log("changeTarget() || NULL"):(console.log("changeTarget() || Resetting States"),console.log("------------------------------"),r.current.resetStates(e))}function V(){if(null!=R)for(var e=0;e<R.length;e++)R[e].img_transform=document.querySelector(".moveable"+R[e].img_id).style.transform,R[e].img_transform_origin=document.querySelector(".moveable"+R[e].img_id).style.transformOrigin,R[e].img_z_index=document.querySelector(".moveable"+R[e].img_id).style.zIndex}function Z(){for(var e in R.sort((function(e,t){return parseInt(e.img_z_index)-parseInt(t.img_z_index)})),console.log(R),R)R[e].img_z_index=e,document.querySelector(".moveable"+R[e].img_id).style.zIndex=e}return Object(a.useEffect)((function(){0==B&&H(),X(1)})),0==C?Object(n.jsx)(ge,{}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{onMouseDown:function(e){console.log("handleClick() || Mouse down");var t=e.target;if(t.className.startsWith("moveable")){var r=t.className.substring(8);console.log("handleClick() || current_target image id: ",r),T(r)}else T(null);l(new Date);var n=K();JSON.stringify(n)!=G[G.length-1]&&(G.push(JSON.stringify(n)),console.log("handleClick() || UNDO STACK UPDATED"),console.log("Length: ",G.length),console.log("UndoStack: ",G),console.log("------------------------------"))},onClick:function(e){console.log("finishClick() || Mouse up"),m(new Date),f-i<200&&Q(e.target.className);var t=K();console.log("finishClick() || Page data: ",t),console.log("finishClick() || Length: ",G.length),console.log("------------------------------")},children:[Object(n.jsx)(de,{id:"carUIMoveable",ref:r,moveableTarget:"target"}),Object(n.jsx)("img",{src:"http://localhost:3001/uploads/background_images/generic.png",alt:"Tesla console background",id:"carUIBg"}),y||"No images here!"]}),Object(n.jsx)(O.a,{variant:"primary",id:"carUI_button",onClick:function(){return b(!0)},children:"Add an image"}),Object(n.jsx)(O.a,{variant:"primary",id:"carUI_button",onClick:function(){if(console.log("Undo() || undoStack: ",G),Q(""),0!=G.length){S(!1);var e=G.pop();0==G.length&&G.push(e),Y(e=JSON.parse(e)),z(e)}},children:"Undo"}),Object(n.jsx)(O.a,{variant:"primary",id:"carUI_button",onClick:function(){null!=R&&(V(),console.log("begin save attempt"),console.log("getImg() || Local Copy: ",R),console.log("------------------------------"),fetch("".concat(k,"/update-image-transforms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)}).then((function(e){return e.text()})).then((function(e){alert("Save Successful!"),H()})))},children:"Save"}),Object(n.jsx)(O.a,{variant:"primary",id:"carUI_button",onClick:function(){console.log("deleteImgFun() || selectedImg: ",E),console.log("------------------------------"),null!=E&&fetch("".concat(k,"/delete-image"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selected_img:E})}).then((function(e){return e.text()})).then((function(e){alert("Delete Successful!"),H()}))},children:"Delete"}),Object(n.jsx)(O.a,{variant:"primary",id:"carUI_button",onClick:function(){if(r.current.state.target){var e=-999,t=0;for(var n in R){console.log(R[n]);var a=parseInt(R[n].img_z_index);a>e?(e=a,t=1):a==e&&(t+=1)}(r.current.state.target.style.zIndex!=e||t>1)&&(r.current.state.target.style.zIndex=e+1,V(),Z())}},children:"Move to Front"}),Object(n.jsx)(O.a,{variant:"primary",id:"carUI_button",onClick:function(){if(r.current.state.target){var e=999,t=0;for(var n in R){console.log(R[n]);var a=parseInt(R[n].img_z_index);a<e?(e=a,t=1):a==e&&(t+=1)}(r.current.state.target.style.zIndex!=e||t>1)&&(r.current.state.target.style.zIndex=e-1,V(),Z())}},children:"Move to Back"}),Object(n.jsx)(O.a,{variant:"primary",id:"carUI_button",href:"/logout",children:"Logout"}),Object(n.jsxs)(le.a,{show:j,onHide:v,style:{opacity:1},children:[Object(n.jsx)(le.a.Header,{closeButton:!0,children:Object(n.jsx)(le.a.Title,{children:"Image Gallery"})}),Object(n.jsx)(le.a.Body,{children:Object(n.jsx)(me,{imageChosen:function(e){console.log("onImageChosen() || IMG URL: ",e),console.log("------------------------------"),v(),function(e){var t="translate(0px, 0px) rotate(0deg) scale(0.3, 0.3)",r="50% 50%";console.log({img_source:e,img_transform:t,img_transform_origin:r,user_token:W}),console.log("------------------------------"),null!=e&&fetch("".concat(k,"/image"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({img_source:e,img_transform:t,img_transform_origin:r,user_token:W})}).then((function(e){return e.text()})).then((function(e){console.log("addImgFun() || Data: ",e),console.log("------------------------------"),H(),Z()}))}(e)}})}),Object(n.jsx)(le.a.Footer,{children:Object(n.jsx)(O.a,{variant:"secondary",onClick:v,children:"Close"})})]})]})},je=function(){return Object(n.jsx)(he,{})},be=function(){return Object(n.jsx)("div",{children:Object(n.jsx)("h1",{children:"404 Not Found!"})})},Oe=function(e){Object(h.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(m.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={profile_name:"",error_msg:"",is_submitted:!1},e.handleSubmit=function(t){t.preventDefault();var r=e.state.profile_name,n={profile_name:r};G([{profile_name:r}])?(e.setState({is_submitted:!0,error_msg:""}),e.props.dispatch(W(n))):e.setState({error_msg:{update_error:"Please enter all the fields."}})},e.handleOnChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(f.a)({},n,a))},e}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.profile;if(u.a.isEmpty(e)&&this.props.dispatch(Y()),!u.a.isEmpty(e)){var t=e.profile_name;this.setState({profile_name:t})}}},{key:"componentDidUpdate",value:function(e){if(u.a.isEqual(e.errors,this.props.errors)||this.setState({error_msg:this.props.errors}),!u.a.isEqual(e.profile,this.props.profile)){var t=this.props.profile.profile_name;this.setState({profile_name:t})}}},{key:"componentWillUnmount",value:function(){this.props.dispatch(E())}},{key:"render",value:function(){var e=this.state,t=e.error_msg,r=e.profile_name,a=e.is_submitted;return Object(n.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(n.jsxs)(b.a,{onSubmit:this.handleSubmit,className:"profile-form",children:[t&&t.update_error?Object(n.jsx)("p",{className:"error_msg centered-message",children:t.update_error}):a&&Object(n.jsx)("p",{className:"successMsg centered-message",children:"Profile updated successfully."}),Object(n.jsxs)(b.a.Group,{controlId:"profile_name",children:[Object(n.jsx)(b.a.Label,{children:"Profile Name:"}),Object(n.jsx)(b.a.Control,{type:"text",name:"profile_name",placeholder:"Enter your profile name",value:r,onChange:this.handleOnChange})]}),Object(n.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(n.jsxs)("h1",{children:["You are currently logged in! Click ",Object(n.jsx)("a",{href:"/logout",children:"here"})," to log out and ",Object(n.jsx)("a",{href:"/car_ui",children:"here"})," to go to the car_ui page"]})]})}}]),r}(o.a.Component),ve=Object(i.b)((function(e){return{profile:e.profile,errors:e.errors}}))(Oe),xe=function(){return Object(n.jsx)(ve,{})},_e=function(e){Object(h.a)(r,e);var t=Object(j.a)(r);function r(){return Object(m.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=Object(_.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,this.props.dispatch)(V()),e.next=4,V();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsx)(ge,{})}}]),r}(o.a.Component),ye=Object(i.b)()(_e),Se=function(){return Object(n.jsx)(ye,{})},ke=r(119),we=r(118),Ie=(i.c,function(){var e=Object(a.useState)({profile_name:null,error_msg:"",is_submitted:!1}),t=Object(ie.a)(e,2),r=t[0],o=t[1],s=Object(a.useState)(!1),c=Object(ie.a)(s,2),i=c[0],l=c[1];return Object(a.useEffect)((function(){0==i&&H().then((function(e){o(e)})),l(1)})),null==r.profile_name?Object(n.jsx)(ge,{}):(console.log(window.location.pathname),"/"==window.location.pathname&&(window.location.pathname="/car_ui"),Object(n.jsx)(ke.a,{className:"navbar",children:Object(n.jsx)(we.a.Item,{children:Object(n.jsxs)("strong",{children:["Logged in as: ",r.profile_name]})})}))}),Ce=Object(p.a)(),Ne=Object(i.b)((function(e){return u.a.isEmpty(e.auth.token)&&!u.a.isEmpty(localStorage.getItem("user_token"))&&(e.auth.token=localStorage.getItem("user_token")),{auth:e.auth}}))((function(e){var t=e.auth;return Object(n.jsx)(d.b,{history:Ce,children:Object(n.jsxs)("div",{children:[!u.a.isEmpty(t.token)&&Object(n.jsx)(Ie,{}),Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)(d.c,{children:[Object(n.jsx)(d.a,{exact:!0,path:"/",component:ne}),Object(n.jsx)(d.a,{path:"/register_user",component:se}),Object(n.jsx)(d.a,{path:"/profile",component:xe}),Object(n.jsx)(d.a,{path:"/logout",component:Se}),Object(n.jsx)(d.a,{path:"/car_ui",component:je}),Object(n.jsx)(d.a,{exact:!0,path:"/404",component:be})]})})]})})})),Ue=(r(111),r(112),document.getElementById("root"));c.a.render(Object(n.jsx)(i.a,{store:J,children:Object(n.jsx)(Ne,{})}),Ue)}},[[113,1,2]]]);
//# sourceMappingURL=main.c6e2f7a5.chunk.js.map